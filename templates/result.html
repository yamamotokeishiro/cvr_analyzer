<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>分析結果 - CVR導線分析ツール</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>CVR導線分析レポート</h1>
        <p>分析対象: <a href="{{ url }}" target="_blank">{{ url }}</a></p>
      </header>

      <main class="results">
        <!-- スクリーンショットセクション -->
        {% if screenshot_paths %}
        <div class="screenshots-section">
          <h2>サイトのスクリーンショット</h2>
          <div class="screenshot-container">
            {% if screenshot_paths.desktop %}
            <div class="screenshot-item">
              <h3>デスクトップ表示</h3>
              <img
                src="{{ url_for('static', filename=screenshot_paths.desktop) }}"
                alt="デスクトップ表示"
                class="screenshot-img"
              />
            </div>
            {% endif %} {% if screenshot_paths.mobile %}
            <div class="screenshot-item">
              <h3>モバイル表示</h3>
              <img
                src="{{ url_for('static', filename=screenshot_paths.mobile) }}"
                alt="モバイル表示"
                class="screenshot-img"
              />
            </div>
            {% endif %}
          </div>
        </div>
        {% endif %}

        <!-- 改善版 result.html (一部) -->
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">
            <h2 class="h4 mb-0">分析結果サマリー</h2>
          </div>
          <div class="card-body">
            <!-- マークダウンのパース結果を構造化して表示 -->
            {% for section in parsed_results %}
            <div class="analysis-section mb-4">
              <h3>{{ section.title }}</h3>

              {% if section.status %}
              <div class="status-box mb-3">
                <h5>現状:</h5>
                <p>{{ section.status }}</p>
              </div>
              {% endif %} {% if section.problems %}
              <div class="problem-point">
                <h5>問題点:</h5>
                <ul>
                  {% for problem in section.problems %}
                  <li>{{ problem }}</li>
                  {% endfor %}
                </ul>
              </div>
              {% endif %} {% if section.suggestions %}
              <div class="solution-point">
                <h5>改善案:</h5>
                <ul>
                  {% for suggestion in section.suggestions %}
                  <li>{{ suggestion }}</li>
                  {% endfor %}
                </ul>
              </div>
              {% endif %}
            </div>
            {% endfor %}

            <!-- 優先的改善点 -->
            {% if priorities %}
            <div class="priorities-section mt-4">
              <h3>優先的に取り組むべき改善点</h3>
              {% for priority in priorities %}
              <div class="priority-item">
                <h5>優先度 {{ loop.index }}:</h5>
                <p>{{ priority }}</p>
              </div>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </div>

        <!-- 分析結果の下にスクリーンショットを表示 -->
        {% if screenshot %}
        <div class="card mt-4">
          <div class="card-header">
            <h3>ウェブサイトスクリーンショット</h3>
          </div>
          <div class="card-body">
            <img
              src="{{ url_for('static', filename='screenshots/' + screenshot) }}"
              alt="サイトスクリーンショット"
              class="img-fluid border"
            />
          </div>
        </div>
        {% endif %}

        <div class="cta-section">
          <h2>さらに詳しい分析とサポートをご希望ですか？</h2>
          <p>
            私たちの専門チームがあなたのウェブサイトを徹底的に分析し、CVRを劇的に向上させるための具体的な施策をご提案します。
          </p>
          <a href="#" class="contact-btn">無料相談を予約する</a>
        </div>
      </main>

      <footer>
        <p>&copy; 2025 CVR導線分析ツール</p>
      </footer>
    </div>
  </body>
</html>
